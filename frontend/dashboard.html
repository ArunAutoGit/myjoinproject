<!DOCTYPE html>
<html>
<head><title>Dashboard</title></head>
<body>
  <h2>Joined Devices</h2>
  <button onclick="loadData()">Refresh</button>
  <table border="1" id="deviceTable">
    <thead>
      <tr><th>ID</th><th>Device ID</th><th>User Agent</th><th>Joined At</th></tr>
    </thead>
    <tbody></tbody>
  </table>
  <script>
    async function loadData() {
      const res = await fetch('/dashboard-data');
      const devices = await res.json();
      const tbody = document.querySelector('#deviceTable tbody');
      tbody.innerHTML = '';
      devices.forEach(d => {
        tbody.innerHTML += `<tr>
          <td>${d.id}</td>
          <td>${d.device_id}</td>
          <td>${d.user_agent}</td>
          <td>${d.joined_at}</td>
        </tr>`;
      });
    }
    loadData();
  </script>
</body>
</html>
